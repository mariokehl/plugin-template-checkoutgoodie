function CheckoutGoodie(t){this.itemSum=t,this.getConfig=function(){return JSON.parse(document.getElementById("checkout-goodie-config").textContent)},this.getGrossValue=function(){return this.getConfig().grossValue},this.getItemSum=function(){if(t)return t;return this.getConfig().initialData.amount},this.getGoalReachedMessage=function(){const t=this.getConfig();return t.icons.goal+"&nbsp;"+t.messages.goal},this.getMissingMessage=function(t){const e=this.getConfig();let n=e.messages.missing;return n=(n=n.replace(":amount",Intl.NumberFormat("de-DE",{maximumFractionDigits:2,minimumFractionDigits:2}).format(t))).replace(":currency",e.currency)},this.calc=function(){let t;const e=this.getGrossValue()-this.getItemSum();t=e<=0?this.getGoalReachedMessage():this.getMissingMessage(e);let n=this.getItemSum()/this.getGrossValue()*100;n=(n=Math.floor(n))>100?100:n;const s=document.querySelectorAll('[role="progressbar"]')[0];return s.setAttribute("aria-valuenow",n),s.style.width=n+"%",t},this.setLabel=function(){const t=document.getElementsByClassName("missing-goodie-amount");if(t.length){const e=this;Array.prototype.forEach.call(t,function(t){t.innerHTML=e.calc()})}}}window.addEventListener("load",()=>{(new CheckoutGoodie).setLabel()},!1),document.addEventListener("afterBasketChanged",t=>{new CheckoutGoodie(t.detail.itemSum).setLabel()},!1);