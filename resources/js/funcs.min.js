function CheckoutGoodie(t){this.itemSum=t,this.getConfig=function(){return JSON.parse(document.getElementById("checkout-goodie-config").textContent)},this.getGrossValue=function(){return this.getConfig().grossValue},this.getItemSum=function(){if("number"==typeof this.itemSum)return this.itemSum;return this.getConfig().initialData.amount},this.getGoalReachedMessage=function(){const t=this.getConfig();return t.icons.goal+"&nbsp;"+t.messages.goal},this.getMissingMessage=function(t){const e=this.getConfig();let i=e.messages.missing;return i=(i=i.replace(":amount",Intl.NumberFormat("de-DE",{maximumFractionDigits:2,minimumFractionDigits:2}).format(t))).replace(":currency",e.currency)},this.calc=function(){let t;const e=this.getGrossValue()-this.getItemSum();t=e<=0?this.getGoalReachedMessage():this.getMissingMessage(e);let i=this.getItemSum()/this.getGrossValue()*100;i=(i=Math.floor(i))>100?100:i;const n=document.querySelectorAll('[role="progressbar"]')[0];return n.setAttribute("aria-valuenow",i),n.style.width=i+"%",t},this.setLabel=function(){const t=document.getElementsByClassName("missing-goodie-amount");if(t.length){const e=this;Array.prototype.forEach.call(t,function(t){t.innerHTML=e.calc()})}}}window.addEventListener("load",()=>{new CheckoutGoodie(null).setLabel()},!1),document.addEventListener("afterBasketChanged",t=>{new CheckoutGoodie(t.detail.itemSum).setLabel()},!1);